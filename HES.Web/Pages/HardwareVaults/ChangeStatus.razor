@inherits HESModalBase

@if (HardwareVault == null)
{
    <Loader />
}
else
{
    if (EntityBeingEdited)
    {
        <EditedByAnother EntityName="hardware vault" CloseAction="ModalDialogCancel" />
    }
    else
    {
        @switch (VaultStatus)
        {
            case VaultStatus.Active:
                <div class="alert alert-success rounded-0" role="alert">
                    Are you sure you want to activate the vault <b>@HardwareVault.Id</b>?
                </div>
                <div class="d-flex justify-content-end mt-3">
                    <button class="btn btn-secondary me-2" @onclick="ModalDialogCancel">Cancel</button>
                    <Button Text="Activate" class="btn btn-primary btn-min-w" OnClick="ChangeStatusAsync" />
                </div>
                break;
            case VaultStatus.Suspended:
                <div class="alert alert-warning rounded-0" role="alert">
                    Are you sure you want to suspend the vault <b>@HardwareVault.Id</b>?
                </div>
                <div class="form-group">
                    <label class="control-label text-gray">Description</label>
                    <textarea @bind="StatusDescription" class="form-control" rows="2" />
                </div>
                <div class="d-flex justify-content-end mt-3">
                    <button class="btn btn-secondary me-2" @onclick="ModalDialogCancel">Cancel</button>
                    <Button Text="Suspend" class="btn btn-primary btn-min-w" OnClick="ChangeStatusAsync" />
                </div>
                break;
            case VaultStatus.Compromised:
                <div class="alert alert-warning rounded-0" role="alert">
                    Are you sure you want to set compromised vault <b>@HardwareVault.Id</b>?
                </div>
                <div class="form-group">
                    <label class="text-gray">Status reason</label>
                    <select @bind="StatusReason" class="form-select">
                        <option selected value=@VaultStatusReason.Lost>Lost</option>
                        <option value=@VaultStatusReason.Stolen>Stolen</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="control-label text-gray">Description</label>
                    <textarea @bind="StatusDescription" class="form-control" rows="2" />
                </div>
                <div class="form-group">
                    <label class="control-label text-gray">Please type <b>@HardwareVault.Id</b> to confirm.</label>
                    <input type="text" @bind-value="CompromisedConfirmText" @bind-value:event="oninput" @onkeyup="@CompromisedConfirm" class="form-control" />
                </div>
                <div class="form-footer">
                    <button class="btn btn-secondary me-2" @onclick="ModalDialogCancel">Cancel</button>
                    <Button Text="Compromised" class="btn btn-danger btn-min-w" OnClick="ChangeStatusAsync" IsDisabled="CompromisedIsDisabled" />
                </div>
                break;
        }
    }
}